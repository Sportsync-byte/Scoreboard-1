// Indoor Cricket Scoreboard (Spectator View)

const scoreboard = {
    teamA: "Team A",
    teamB: "Team B",
    score: 0,
    wickets: 0,
    overs: 0,
    balls: 0,
    partnership: [0, 0, 0, 0],
    currentBatsmen: ["Batsman 1", "Batsman 2"],
    bowler: "Bowler Name",
    bowlerStats: { overs: 0, runs: 0, wickets: 0 },
    isTeamABatting: true
};

function updateScore(runs, isWicket = false) {
    if (isWicket) {
        scoreboard.wickets++;
        scoreboard.score -= 5;
    } else {
        scoreboard.score += runs;
        scoreboard.partnership[Math.floor(scoreboard.overs / 4)] += runs;
    }
    scoreboard.balls++;
    if (scoreboard.balls === 6) {
        scoreboard.balls = 0;
        scoreboard.overs++;
        scoreboard.bowlerStats.overs++;
    }
    syncWithScorersScreen();
}

function changeStrike() {
    [scoreboard.currentBatsmen[0], scoreboard.currentBatsmen[1]] = [scoreboard.currentBatsmen[1], scoreboard.currentBatsmen[0]];
    syncWithScorersScreen();
}

function endInnings() {
    scoreboard.isTeamABatting = !scoreboard.isTeamABatting;
    scoreboard.score = 0;
    scoreboard.wickets = 0;
    scoreboard.overs = 0;
    scoreboard.balls = 0;
    scoreboard.partnership = [0, 0, 0, 0];
    syncWithScorersScreen();
}

function syncWithScorersScreen() {
    localStorage.setItem("scoreboard", JSON.stringify(scoreboard));
}

window.onload = function () {
    setInterval(() => {
        const updatedData = JSON.parse(localStorage.getItem("scoreboard"));
        if (updatedData) {
            Object.assign(scoreboard, updatedData);
            renderScoreboard();
        }
    }, 1000);
}

function renderScoreboard() {
    document.getElementById("teamA").innerText = scoreboard.teamA;
    document.getElementById("teamB").innerText = scoreboard.teamB;
    document.getElementById("totalScore").innerText = scoreboard.score;
    document.getElementById("wickets").innerText = scoreboard.wickets;
    document.getElementById("overs").innerText = `${scoreboard.overs}.${scoreboard.balls}`;
    document.getElementById("batsman1").innerText = scoreboard.currentBatsmen[0];
    document.getElementById("batsman2").innerText = scoreboard.currentBatsmen[1];
    document.getElementById("bowler").innerText = scoreboard.bowler;
}

// Auto-open Scorers Screen
window.open("scorers-screen.html", "_blank");
